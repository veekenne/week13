<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mecha Anime Rating</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            padding: 20px;
        }
        .anime-container {
            background: #fff;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .anime-title {
            font-weight: bold;
            font-size: 1.2em;
        }
        .rating-options {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    
    <p>Welcome to the Mecha Anime Rating Generator! This tool allows you to rate some of the most iconic mecha anime. Based on your ratings, we will recommend new shows that align with your preferences. Have fun exploring and discovering new favorites!</p>
    <div id="anime-list"></div>
    <button onclick="submitRatings()">Submit Ratings</button>
    <div id="top-genres"></div>
    <div id="recommendations"></div>

    <script>
        const animeJson = [
            { "title": "Mobile Suit Gundam", "sub_genre": "Real Robot", "creator": "Yoshiyuki Tomino", "year": 1979 },
            { "title": "Neon Genesis Evangelion", "sub_genre": "Psychological Mecha", "creator": "Hideaki Anno", "year": 1995 },
            { "title": "The Super Dimension Fortress Macross", "sub_genre": "Real Robot", "creator": "Shoji Kawamori", "year": 1982 },
            { "title": "Mobile Suit Zeta Gundam", "sub_genre": "Real Robot", "creator": "Yoshiyuki Tomino", "year": 1985 },
            { "title": "Code Geass: Lelouch of the Rebellion", "sub_genre": "Military Mecha", "creator": "Gorō Taniguchi", "year": 2006 },
            { "title": "Full Metal Panic!", "sub_genre": "Military Mecha", "creator": "Shoji Gatoh", "year": 2002 },
            { "title": "Gurren Lagann", "sub_genre": "Super Robot", "creator": "Hiroyuki Imaishi", "year": 2007 },
            { "title": "Patlabor: The Mobile Police", "sub_genre": "Real Robot", "creator": "Mamoru Oshii", "year": 1989 },
            { "title": "Martian Successor Nadesico", "sub_genre": "Space Opera Mecha", "creator": "Tatsuo Sato", "year": 1996 },
            { "title": "Eureka Seven", "sub_genre": "Adventure Mecha", "creator": "Tomoki Kyoda", "year": 2005 }
        ];

        function getRandomAnime(animeList, count) {
            const shuffled = animeList.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        const selectedAnime = getRandomAnime(animeJson, 10);
        const animeListContainer = document.getElementById('anime-list');

        selectedAnime.forEach(anime => {
            const animeContainer = document.createElement('div');
            animeContainer.classList.add('anime-container');

            const animeTitle = document.createElement('div');
            animeTitle.classList.add('anime-title');
            animeTitle.textContent = `${anime.title} (${anime.year}) by ${anime.creator}`;

            const ratingOptions = document.createElement('div');
            ratingOptions.classList.add('rating-options');

            for (let i = 1; i <= 5; i++) {
                const label = document.createElement('label');
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `rating-${anime.title}`;
                radio.value = i;
                label.appendChild(radio);
                label.appendChild(document.createTextNode(` ${i} `));
                ratingOptions.appendChild(label);
            }

            const haventSeenLabel = document.createElement('label');
            const haventSeenRadio = document.createElement('input');
            haventSeenRadio.type = 'radio';
            haventSeenRadio.name = `rating-${anime.title}`;
            haventSeenRadio.value = 'haven't seen';
            haventSeenLabel.appendChild(haventSeenRadio);
            haventSeenLabel.appendChild(document.createTextNode(" Haven't seen it"));
            ratingOptions.appendChild(haventSeenLabel);

            animeContainer.appendChild(animeTitle);
            animeContainer.appendChild(ratingOptions);
            animeListContainer.appendChild(animeContainer);
        });

        function submitRatings() {
            const genreRatings = {};
            const ratedAnimeTitles = [];

            selectedAnime.forEach(anime => {
                const ratingElements = document.getElementsByName(`rating-${anime.title}`);
                let rating = null;
                ratingElements.forEach(element => {
                    if (element.checked) {
                        rating = element.value;
                    }
                });

                if (rating && rating !== "haven't seen" && parseInt(rating) >= 3) {
                    ratedAnimeTitles.push(anime.title);
                    if (genreRatings[anime.sub_genre]) {
                        genreRatings[anime.sub_genre]++;
                    } else {
                        genreRatings[anime.sub_genre] = 1;
                    }
                }
            });

            const topGenresContainer = document.getElementById('top-genres');
            topGenresContainer.innerHTML = '<h2>Top 3 Genres:</h2>';

            const sortedGenres = Object.entries(genreRatings).sort((a, b) => b[1] - a[1]).slice(0, 3);
            sortedGenres.forEach(([genre, count]) => {
                const genreDiv = document.createElement('div');
                genreDiv.textContent = `${genre}: ${count}`;
                topGenresContainer.appendChild(genreDiv);
            });

            recommendAnime(sortedGenres.map(([genre]) => genre), ratedAnimeTitles);
        }

        function recommendAnime(topGenres, ratedAnimeTitles) {
            const recommendationsContainer = document.getElementById('recommendations');
            recommendationsContainer.innerHTML = '<h2>Recommended Shows:</h2>';

            const recommendations = animeJson.filter(anime => 
                topGenres.includes(anime.sub_genre) && !ratedAnimeTitles.includes(anime.title)
            ).slice(0, 3);

            recommendations.forEach(anime => {
                const recommendationDiv = document.createElement('div');
                recommendationDiv.textContent = `${anime.title} (${anime.year}) by ${anime.creator}`;
                recommendationsContainer.appendChild(recommendationDiv);
            });
        }
    </script>
</body>
</html>
